--color_id
family color
flags {basic}
component color_id
var color
dim vec4

--color_bgr < color_id
component color_bgr

--color_gbr < color_id
component color_gbr

--rotate_hsv0 < color_id
component rotate_hsv
par {rot: 0.06, len_sc:0.0, len_sc_amt:0.0, th_spd: 0.0}

--rotate_hsv1 < color_id
component rotate_hsv
par {rot: 0.17, len_sc:1.0, len_sc_amt:0.5, th_spd: 0.0}


--disp_id
family disp
flags {basic, root}
component disp
modules {post: post_id}


--default_main
family main
flags {root}
component main
modules {main_body: default_main_body}

--analysis_main < default_main
flags {}
modules {main_body: analysis_main_body}

--default_main_body
family main_body
component main_stc
modules {seed: seed_border, t:t_wrap_zo, color: color_gbr, reduce: torus_reduce}
var color
dim vec4

--analysis_main_body < default_main_body
modules {seed: seed_analysis, t:t_wrap_zo, color: color_id, reduce: torus_reduce}


--post_id
family post
flags {basic}
component post_id
var frame
dim vec4

--post_hlim1 < post_id
flags {basic, post_hlim}
component post_hlim
par {gamma:2.0, hue:0.0, spread:0.5, lgv:0.5}

--post_hlim2 < post_hlim1
par {gamma:2.0, hue:0.33, spread:0.5, lgv:0.5}

--post_hlim3 < post_hlim1
par {gamma:2.0, hue:0.66, spread:0.5, lgv:0.5}

--post_hlim1anim < post_hlim1
paths {hue:loop 0.01, spread:wave 0.066 0.35 1.5, lgv:wave 0.045 0.125 0.5}


--torus_reduce
family reduce
component torus_reduce
var z
dim vec2


--seed_nothing
family seed
component seed_nothing
var seed
dim vec4

--seed_border < seed_nothing
flags {t_test}
component seed_border
par {w: 0.2, alpha: 1.0}
modules {t: t_wrap}

--seed_circle < seed_nothing
flags {t_test, img}
component seed_circle
par {w: 0.2, r: 0.5, sc: 1.0, alpha: 0.8, spd: 6.0}
modules {t: t_wrap}
images [/textures/simplegeom/tile_rainbow2.png]

--seed_ball < seed_nothing
flags {t_test, img}
component seed_circle
par {w: 0.5, r: 0.0, sc: 1.0, alpha: 0.7, spd:1.0}
modules {t: t_wrap}
images [/textures/misc/tile_oct1.png]

--seed_border_img1 < seed_border
flags {t_test, img}
component seed_simple_img
images [/textures/simplegeom/tile_grid1.png]

--seed_border_img2 < seed_border_img1
images [/textures/simplegeom/tile_grid6.png]

--seed_border_img3 < seed_border_img1
images [/textures/simplegeom/tile_psych1.png]




--seed_analysis < seed_border
flags {analysis}
par {w: 0.05}
component seed_analysis


--switch
family switch
component switch
sub {var: v0, dim: float}
par {intrp: 0.0}
modules {m0: id, m1: id}

--smooth_switch < switch
component smooth_switch


--t_id
family t
component t_id
var z
dim vec2

--t_wrap_sub < t_id
flags {wrap, sub}
zn [1.0 + 0.0i, 0.0 + 0.0i, 1.0 + 0.0i, 0.0 + 0.0i]
component t_wrap_sub
sub {t_inner: z}

--t_wrap_zo_sub < t_wrap_sub
zn [1.1 + 0.0i, 0.0 + 0.0i, 1.0 + 0.0i, 0.0 + 0.0i]

--t_wrap < t_id
flags {wrap}
zn [1.0 + 0.0i, 0.0 + 0.0i, 1.0 + 0.0i, 0.0 + 0.0i]
component t_wrap
modules {t_inner: t_z}

--t_wrap_zo < t_wrap
flags {wrap, all}
zn [1.1 + 0.0i, 0.0 + 0.0i, 1.0 + 0.0i, 0.0 + 0.0i]

--t_wrap_zo' < t_wrap
flags {wrap, all}
zn [1.1 + 0.0i, 0.0 + 0.0i, 0.0 + 1.0i, 1.0 + 0.0i]

--t_wrap_zo'1 < t_wrap
flags {wrap, all'}
zn [1.1 + 0.0i, 0.0 + 0.0i, 0.0 + 1.0i, 1.0 + 0.0i]
paths {0:circle 0.005 1.0}

--t_wrap_zo'2 < t_wrap
flags {wrap, all'}
zn [1.1 + 0.0i, 0.0 + 0.0i, 0.0 + 1.0i, 1.0 + 0.0i]
paths {1:rose 0.006 0.8 5.0 -0.8}

--t_wrap_zo'3 < t_wrap
flags {wrap, all'}
zn [1.1 + 0.0i, 0.0 + 0.0i, 0.0 + 1.0i, 1.0 + 0.0i]
paths {3:rose 0.0035 1.1 4.0 0.0}

--t_wrap_zo'4 < t_wrap
flags {wrap, all'}
zn [1.1 + 0.0i, 0.0 + 0.0i, 0.0 + 1.0i, 1.0 + 0.0i]
paths {0:circle 0.005 1.0, 3:rose 0.0035 1.1 4.0 0.0}

--t_main1 < t_wrap
flags {wrap, all''}
zn [1.0 + 0.0i, 0.0 + 0.0i, 0.0 + 1.1i, 1.0 + 0.0i]
modules {t_inner: t_sinh}
paths {0:circle 0.005 1.0, 1:rose 0.006 0.8 5.0 -0.8, 3:rose 0.0035 1.1 4.0 0.0}
scripts [randomizeTI1]


--t_z
family t_inner
flags {all}
component t_sub
var z
dim vec2
sub {t_expr: z}

--t_cos < t_z
flags {all}
sub {t_expr: cos(z)}

--t_sin < t_z
flags {all}
sub {t_expr: sin(z)}

--t_cosh < t_z
flags {all}
sub {t_expr: cosh(z)}

--t_sinh < t_z
flags {all}
sub {t_expr: sinh(z)}

--t_tan < t_z
flags {all}
sub {t_expr: tan(z)}

--t_tanh < t_z
flags {all}
sub {t_expr: tanh(z)}

--t_exp < t_z
flags {all}
sub {t_expr: exp(z)}

--t_p0 < t_z
flags {all}
sub {t_expr: z / (z + 1) + z / (z - 1)}

--t_p1 < t_z
flags {all}
sub {t_expr: 1 - 5 * z * z * z / 3}

--t_p2 < t_z
flags {all}
sub {t_expr: 1 - z * z}

--t_p3 < t_z
flags {all}
sub {t_expr: z * (1 + z) / 2}

--t_p4 < t_z
flags {all}
sub {t_expr: z * z}

--t_tp0 < t_z
flags {all}
sub {t_expr: 1 - (z * z + tanh(z)) / 2}

--t_tp1 < t_z
flags {all}
sub {t_expr: cos(z) - tanh(z)}

--t_tp2 < t_z
flags {all}
sub {t_expr: (z + exp(z)) / 2}

--t_tp3 < t_z
flags {all}
sub {t_expr: (sin(z) + tan(z)) / 2}

--t_tp4 < t_z
flags {all}
sub {t_expr: cosh(z) + exp(z)}

--t_tp5 < t_z
flags {all}
sub {t_expr: z * cos(z)}

--t_tp6 < t_z
flags {all}
sub {t_expr: (cosh(z) + sinh(z)) / 2}

--t_inv < t_z
flags {all, inv}
sub {t_expr: 1.0 / z}

--t_zti < t_z
flags {all}
sub {t_expr: 2.0 * z / tan (z * i)}


--default_vert
family vert
flags {root}
component default_vert




--main1 < default_main
modules {main_body: main1_body}

--main1_body < default_main_body
modules {t: t_main1, seed: seed_borderM, color: rotate_hsv1, reduce: torus_reduce}

--seed_borderM < seed_border
flags {}
par {w: 0.5, alpha: 0.5}
modules {t: ts_wrap_linx3', reduce: torus_reduce}
paths {w:wave 0.2 0.45 0.55, alpha:wave 0.3 0.35 0.65}

--seed_borderM1 < seed_borderM
component seed_simple_img
images [/textures/simplegeom/tile_grid1.png]

--ts_wrap_linx3' < t_id
zn [1.1 + 0.0i, 0.0 + 0.0i, 1.0 + 0.0i, 0.0 + 0.0i]
component t_wrap
modules {t_inner: t_z}
paths {3:rose 0.0035 1.1 4.0 0.0}

--disp_main1 < disp_id
flags {}
modules {post: post_hlim1anim}

